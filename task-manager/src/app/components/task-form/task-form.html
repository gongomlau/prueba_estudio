<div class="task-form">
  <h2>{{ isEditMode ? '✏️ Editar Tarea' : '➕ Nueva Tarea' }}</h2>

  <div *ngIf="loading" class="status">Cargando...</div>
  <div *ngIf="error" class="status error">{{ error }}</div>

  <form *ngIf="!loading" (ngSubmit)="onSubmit()">

    <!-- Título -->
    <div class="form-group">
      <label for="title">Título *</label>
      <input
        type="text"
        id="title"
        [(ngModel)]="task.titulo"
        name="titulo"
        placeholder="Escribe el título...">
      <span *ngIf="task.titulo.length > 0 && task.titulo.length < 3" class="error-msg">
        Mínimo 3 caracteres
      </span>
    </div>
    <!-- Descripción -->
    <div class="form-group">
      <label for="descripcion">Descripción *</label>
      <textarea
        id="descripcion"
        [(ngModel)]="task.descripcion"
        name="descripcion"
        placeholder="Escribe la descripción..."></textarea>
      <span *ngIf="task.descripcion.length > 0 && task.descripcion.length < 5" class="error-msg">
        Mínimo 5 caracteres
      </span>
    </div>

    <!-- Completada -->
    <div class="form-group checkbox">
      <label>
        <input
          type="checkbox"
          [(ngModel)]="task.completada"
          name="completada">
        Tarea completada
      </label>
    </div>

    <!-- Botones -->
    <div class="form-actions">
      <button type="submit" [disabled]="!isFormValid()" class="btn btn-primary">
        {{ isEditMode ? 'Guardar' : 'Crear' }}
      </button>
      <button type="button" (click)="cancel()" class="btn btn-secondary">
        Cancelar
      </button>
    </div>
  </form>
</div>
